{"version":3,"sources":["../../webScripts/MessageItemFactory.js"],"names":["MessageItemFactory","document","Error","moment","require","utcOffset","locale","undefined","prototype","setLocale","createItem","message","item","createElement","itemDiv","messageElementProfile","resendButton","messageElementDate","messageContent","className","innerText","sender","id","utc","Date","now","format","appendChild","loadItem","CreatedAt","changeSuccessStatusMessage","sendRetryValidate","classes","split","i","indexOf","classList","toggle","_id","changeFailureStatusMessage","listener","addEventListener","createRequestFriendItem","requestFriendId","FriendShipConfirmButton","FriendShipCancelButton","elementLoader","value","createFriendItem","createRoomItem","room","roomName","module","exports"],"mappings":"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","file":"MessageItemFactory.js","sourcesContent":["/**\n * Created by kishe56@gmail.com on 2018. 9. 18.\n * Blog : https://kishe89.github.io\n * Github : https://github.com/kishe89\n */\n'use strict';\n\nfunction MessageItemFactory(document) {\n  if(!(this instanceof MessageItemFactory)){\n    throw new Error('must be created with new keyword');\n  }\n  const moment = require('moment');\n  this.document = document;\n  this.moment = moment;\n  this.utcOffset = moment().utcOffset();\n  this.locale = undefined;\n  \n}\n\nMessageItemFactory.prototype.setLocale = function (locale) {\n  this.locale = locale;\n  this.moment.locale(locale);\n  return this.locale;\n}\n\nMessageItemFactory.prototype.createItem = function (message) {\n  const item = this.document.createElement('li');\n  const itemDiv = this.document.createElement('div');\n  const messageElementProfile = this.document.createElement('p');\n  const resendButton = this.document.createElement('div');\n  const messageElementDate = this.document.createElement('p');\n  const messageContent = this.document.createElement('p');\n\n  item.className = 'messageElement';\n  resendButton.className = 'messageElementReSendButton';\n  messageElementProfile.className = 'messageElementProfile';\n  messageElementDate.className = 'messageElementDate';\n  messageContent.className = 'messageContent';\n\n  messageElementProfile.innerText = message.sender.id;\n  resendButton.innerText = '재전송';\n  messageElementDate.innerText = this.moment.utc(Date.now()).utcOffset(this.utcOffset).format();\n  messageContent.innerText = message.message;\n\n  itemDiv.appendChild(messageElementProfile);\n  itemDiv.appendChild(messageElementDate);\n  itemDiv.appendChild(resendButton);\n  itemDiv.appendChild(messageContent);\n  item.appendChild(itemDiv);\n  return {\n    item:item,\n    itemDiv:itemDiv,\n    resendButton:resendButton,\n    messageElementProfile:messageElementProfile,\n    messageElementDate:messageElementDate,\n    messageContent:messageContent\n  };\n};\n\nMessageItemFactory.prototype.loadItem = function (message) {\n  const item = this.document.createElement('li');\n  const itemDiv = this.document.createElement('div');\n  const messageElementProfile = this.document.createElement('p');\n  const resendButton = this.document.createElement('div');\n  const messageElementDate = this.document.createElement('p');\n  const messageContent = this.document.createElement('p');\n\n  item.className = 'messageElement';\n  resendButton.className = 'messageElementReSendButton';\n  messageElementProfile.className = 'messageElementProfile';\n  messageElementDate.className = 'messageElementDate';\n  messageContent.className = 'messageContent';\n\n  messageElementProfile.innerText = message.sender.id;\n  resendButton.innerText = '재전송';\n  messageElementDate.innerText = this.moment.utc(message.CreatedAt).utcOffset(this.utcOffset).format();\n  messageContent.innerText = message.message;\n\n  itemDiv.appendChild(messageElementProfile);\n  itemDiv.appendChild(messageElementDate);\n  itemDiv.appendChild(resendButton);\n  itemDiv.appendChild(messageContent);\n  item.appendChild(itemDiv);\n  return item;\n};\n\nMessageItemFactory.prototype.changeSuccessStatusMessage = function (item, message) {\n  const sendRetryValidate = (item)=>{\n    const classes = item.className.split(' ');\n    const i = classes.indexOf('show');\n    if(i>=0) item.classList.toggle('show');\n  }\n  item.item._id = message._id;\n  sendRetryValidate(item.resendButton);\n  item.messageElementProfile.innerText = message.sender.id;\n  item.messageElementDate.innerText = this.moment.utc(message.CreatedAt).utcOffset(this.utcOffset).format();\n  item.messageContent.innerText = message.message;\n  return item;\n};\nMessageItemFactory.prototype.changeFailureStatusMessage = function (item, message, listener) {\n  item.resendButton.classList.toggle('show');\n  item.resendButton.addEventListener('click'.listener);\n  return item;\n};\nMessageItemFactory.prototype.createRequestFriendItem = function (message) {\n  const item = this.document.createElement('li');\n  const requestFriendId = this.document.createElement('p');\n  const FriendShipConfirmButton = this.document.createElement('button');\n  const FriendShipCancelButton = this.document.createElement('button');\n  const elementLoader = this.document.createElement('div');\n\n  item.id = message._id;\n\n  item.className = 'requestElement';\n  requestFriendId.className = 'requestFriendId';\n  FriendShipConfirmButton.className = 'FriendShipButton';\n  FriendShipCancelButton.className = 'FriendShipButton';\n  elementLoader.className = 'elementLoader';\n\n  requestFriendId.innerText = message.id;\n  FriendShipCancelButton.innerText = '수락';\n  FriendShipConfirmButton.value = 1;\n  FriendShipCancelButton.innerText = '거절';\n  FriendShipCancelButton.value = 0;\n\n  item.appendChild(requestFriendId);\n  item.appendChild(FriendShipConfirmButton);\n  item.appendChild(FriendShipCancelButton);\n  item.appendChild(elementLoader);\n  return item;\n\n};\n\nMessageItemFactory.prototype.createFriendItem = function (message) {\n  const item = this.document.createElement('li');\n  const requestFriendId = this.document.createElement('p');\n  const FriendShipCancelButton = this.document.createElement('button');\n  const elementLoader = this.document.createElement('div');\n\n  item.id = message._id;\n\n  item.className = 'friendElement';\n  requestFriendId.className = 'friendId';\n  FriendShipCancelButton.className = 'cancelFriendShipButton';\n  elementLoader.className = 'elementLoader';\n\n  requestFriendId.innerText = message.id;\n  FriendShipCancelButton.innerText = '친구 삭제';\n\n  item.appendChild(requestFriendId);\n  item.appendChild(FriendShipCancelButton);\n  item.appendChild(elementLoader);\n  return item;\n\n};\n\nMessageItemFactory.prototype.createRoomItem = function (room) {\n  const item = this.document.createElement('li');\n  item.className = 'roomButton';\n  item.id = room._id;\n  item.innerText = room.roomName;\n  return item;\n}\n\nmodule.exports = MessageItemFactory;"]}