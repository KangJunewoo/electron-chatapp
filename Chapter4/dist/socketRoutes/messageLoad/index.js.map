{"version":3,"sources":["../../../socketRoutes/messageLoad/index.js"],"names":["module","exports","socket","event","Verfier","require","JWTVerifier","findRoom","sendSuccessAck","sendFailureAck","on","message","ack","console","log","verify","token","then","room","catch","error"],"mappings":"AAAA;;;;;AAKA;;AAEAA,OAAOC,OAAP,GAAiB,UAACC,MAAD,EAAQC,KAAR,EAAgB;AAC/B,MAAMC,UAAUC,QAAQ,qBAAR,CAAhB;AACA,MAAMC,cAAc,IAAIF,OAAJ,EAApB;AACA,MAAMG,WAAWF,QAAQ,uBAAR,CAAjB;AACA,MAAMG,iBAAiBH,QAAQ,6BAAR,CAAvB;AACA,MAAMI,iBAAiBJ,QAAQ,6BAAR,CAAvB;AACAH,SAAOQ,EAAP,CAAUP,KAAV,EAAgB,UAACQ,OAAD,EAASC,GAAT,EAAe;AAC7BC,YAAQC,GAAR,CAAYX,KAAZ;AACAG,gBAAYS,MAAZ,CAAmBb,MAAnB,EAA0BS,QAAQK,KAAlC,EACGC,IADH,CACQ,YAAI;AACR,aAAOV,SAASI,OAAT,CAAP;AACD,KAHH,EAIGM,IAJH,CAIQ,UAACC,IAAD,EAAQ;AACZL,cAAQC,GAAR,CAAYI,IAAZ;AACA,aAAOV,eAAeU,IAAf,EAAoBP,OAApB,EAA4BC,GAA5B,CAAP;AACD,KAPH,EAQGO,KARH,CAQS,UAACC,KAAD,EAAS;AACd,aAAOX,eAAeW,KAAf,EAAqBT,OAArB,EAA6BC,GAA7B,CAAP;AACD,KAVH;AAWD,GAbD;AAcD,CApBD","file":"index.js","sourcesContent":["/**\n * Created by kishe56@gmail.com on 2018. 9. 19.\n * Blog : https://kishe89.github.io\n * Github : https://github.com/kishe89\n */\n'use strict';\n\nmodule.exports = (socket,event)=>{\n  const Verfier = require('../../util/Verifier');\n  const JWTVerifier = new Verfier();\n  const findRoom = require('./middleware/findRoom');\n  const sendSuccessAck = require('./middleware/sendSuccessAck');\n  const sendFailureAck = require('./middleware/sendFailureAck');\n  socket.on(event,(message,ack)=>{\n    console.log(event);\n    JWTVerifier.verify(socket,message.token)\n      .then(()=>{\n        return findRoom(message);\n      })\n      .then((room)=>{\n        console.log(room);\n        return sendSuccessAck(room,message,ack);\n      })\n      .catch((error)=>{\n        return sendFailureAck(error,message,ack);\n      })\n  });\n};"]}