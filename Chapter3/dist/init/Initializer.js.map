{"version":3,"sources":["../../init/Initializer.js"],"names":["exports","InitMongoDB","env","mongoose","Promise","resolve","reject","VCAP_SERVICES","connectURL","options","connectTimeoutMS","keepAlive","ha","autoReconnect","reconnectTries","connect","db","connection","on","console","log"],"mappings":"AAAA;;;;;AAKA;;AAEAA,QAAQC,WAAR,GAAsB,UAACC,GAAD,EAAKC,QAAL,EAAgB;AACpC,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAASC,MAAT,EAAkB;AACnC,QAAGJ,IAAIK,aAAP,EAAqB;AACnB;;;AAGD,KAJD,MAIK;AACH;;;;;AAKA,UAAMC,aAAa,+DAAnB;AACA,UAAMC,UAAU;AACdC,0BAAkB,IADJ;AAEdC,mBAAU,IAFI;AAGdC,YAAG,IAHW;AAIdC,uBAAc,IAJA;AAKdC,wBAAe;AALD,OAAhB;AAOAX,eAASY,OAAT,CAAiBP,UAAjB,EAA4BC,OAA5B;AACA,UAAMO,KAAKb,SAASc,UAApB;AACAD,SAAGE,EAAH,CAAM,MAAN,EAAa,YAAI;AACfC,gBAAQC,GAAR,CAAY,WAAZ;AACA,eAAOf,SAAP;AACD,OAHD;AAID;AACF,GA1BM,CAAP;AA2BD,CA5BD","file":"Initializer.js","sourcesContent":["/**\n * Created by kishe56@gmail.com on 2018. 7. 9.\n * Blog : https://kishe89.github.io\n * Github : https://github.com/kishe89\n */\n'use strict';\n\nexports.InitMongoDB = (env,mongoose)=>{\n  return new Promise((resolve,reject)=>{\n    if(env.VCAP_SERVICES){\n      /**\n       * Cloud환경\n       */\n    }else{\n      /**\n       * Local\n       *\n       mongodb://<dbuser>:<dbpassword>@ds129811.mlab.com:29811/firstexample\n       */\n      const connectURL = 'mongodb://admin:admin123@ds129811.mlab.com:29811/firstexample';\n      const options = {\n        connectTimeoutMS: 4000,\n        keepAlive:true,\n        ha:true,\n        autoReconnect:true,\n        reconnectTries:30\n      };\n      mongoose.connect(connectURL,options);\n      const db = mongoose.connection;\n      db.on('open',()=>{\n        console.log('connected');\n        return resolve();\n      });\n    }\n  });\n};"]}