{"version":3,"sources":["../../util/Verifier.js"],"names":["Verifier","Error","prototype","verify","socket","token","jsonwebtoken","require","cert","Promise","resolve","reject","err","decodedUser","name","isExistNewToken","emit","module","exports"],"mappings":"AAAA;;;;;AAKA;;AAGA,SAASA,QAAT,GAAoB;AAClB,MAAG,EAAE,gBAAgBA,QAAlB,CAAH,EAA+B;AAC7B,UAAM,IAAIC,KAAJ,CAAU,kCAAV,CAAN;AACD;AAEF;;AAEDD,SAASE,SAAT,CAAmBC,MAAnB,GAA4B,UAAUC,MAAV,EAAiBC,KAAjB,EAAwB;AAClD,MAAMC,eAAeC,QAAQ,cAAR,CAArB;AACA,MAAMC,OAAO,QAAb;AACA,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAASC,MAAT,EAAkB;AACnCL,iBAAaH,MAAb,CAAoBE,KAApB,EAA0BG,IAA1B,EAA+B,UAACI,GAAD,EAAKC,WAAL,EAAmB;AAChD,UAAGD,GAAH,EAAO;AACL,YAAGA,IAAIE,IAAJ,KAAW,mBAAd,EAAkC;AAChCV,iBAAOW,eAAP,GAAyB,IAAzB;AACAX,iBAAOY,IAAP,CAAY,uBAAZ;AACA,iBAAOL,OAAOC,GAAP,CAAP;AACD,SAJD,MAIK;AACH,iBAAOD,OAAOC,GAAP,CAAP;AACD;AACF;AACD,aAAOF,QAAQG,WAAR,CAAP;AACD,KAXD;AAYD,GAbM,CAAP;AAcD,CAjBD;;AAmBAI,OAAOC,OAAP,GAAiBlB,QAAjB","file":"Verifier.js","sourcesContent":["/**\n * Created by kishe56@gmail.com on 2018. 8. 20.\n * Blog : https://kishe89.github.io\n * Github : https://github.com/kishe89\n */\n'use strict';\n\n\nfunction Verifier() {\n  if(!(this instanceof Verifier)){\n    throw new Error('must be created with new keyword');\n  }\n\n}\n\nVerifier.prototype.verify = function (socket,token) {\n  const jsonwebtoken = require('jsonwebtoken');\n  const cert = 'secret';\n  return new Promise((resolve,reject)=>{\n    jsonwebtoken.verify(token,cert,(err,decodedUser)=>{\n      if(err){\n        if(err.name==='TokenExpiredError'){\n          socket.isExistNewToken = true;\n          socket.emit('tokenRefresh-Required');\n          return reject(err);\n        }else{\n          return reject(err);\n        }\n      }\n      return resolve(decodedUser);\n    });\n  });\n};\n\nmodule.exports = Verifier;"]}