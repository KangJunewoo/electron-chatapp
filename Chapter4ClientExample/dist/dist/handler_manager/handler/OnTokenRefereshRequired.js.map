{"version":3,"sources":["../../../handler_manager/handler/OnTokenRefereshRequired.js"],"names":["module","exports","socket","win","TokenManager","axios","require","httpInstance","create","baseURL","tokenRequest","token","getToken","id","getId","get","headers","webContents","send","then","response","setToken","data","io","opts","query","catch","e"],"mappings":"AAAA;;;;;AAKA;;AAEAA,OAAOC,OAAP,GAAiB,UAAUC,MAAV,EAAkBC,GAAlB,EAAuBC,YAAvB,EAAqC;AACpD,MAAIC,QAAQC,QAAQ,OAAR,CAAZ;AACA,MAAIC,eAAeF,MAAMG,MAAN,CAAa,EAAEC,SAAS,4CAAX,EAAb,CAAnB;AACA,MAAIC,eAAe,SAASA,YAAT,GAAwB;AACzC,QAAIC,QAAQP,aAAaQ,QAAb,EAAZ;AACA,QAAIC,KAAKT,aAAaU,KAAb,EAAT;AACA,WAAOP,aAAaQ,GAAb,CAAiB,qBAAqBF,EAAtC,EAA0C,EAAEG,SAAS,EAAE,kBAAkBL,KAApB,EAAX,EAA1C,CAAP;AACD,GAJD;AAKAR,MAAIc,WAAJ,CAAgBC,IAAhB,CAAqB,iBAArB;AACAR,iBAAeS,IAAf,CAAoB,UAAUC,QAAV,EAAoB;AACtChB,iBAAaiB,QAAb,CAAsBD,SAASE,IAAT,CAAcX,KAApC;AACAT,WAAOqB,EAAP,CAAUC,IAAV,CAAeC,KAAf,GAAuB,EAAEd,OAAOP,aAAaQ,QAAb,EAAT,EAAvB;AACAT,QAAIc,WAAJ,CAAgBC,IAAhB,CAAqB,yBAArB;AACD,GAJD,EAIGQ,KAJH,CAIS,UAAUC,CAAV,EAAa;AACpBxB,QAAIc,WAAJ,CAAgBC,IAAhB,CAAqB,yBAArB;AACD,GAND;AAOD,CAhBD;AAiBA","file":"OnTokenRefereshRequired.js","sourcesContent":["/**\n * Created by kishe56@gmail.com on 2018. 9. 13.\n * Blog : https://kishe89.github.io\n * Github : https://github.com/kishe89\n */\n'use strict';\n\nmodule.exports = function (socket, win, TokenManager) {\n  var axios = require('axios');\n  var httpInstance = axios.create({ baseURL: 'http://electronexampleserver.mybluemix.net' });\n  var tokenRequest = function tokenRequest() {\n    var token = TokenManager.getToken();\n    var id = TokenManager.getId();\n    return httpInstance.get('/users/token?id=' + id, { headers: { 'x-access-token': token } });\n  };\n  win.webContents.send('tokenRefreshing');\n  tokenRequest().then(function (response) {\n    TokenManager.setToken(response.data.token);\n    socket.io.opts.query = { token: TokenManager.getToken() };\n    win.webContents.send('tokenRefreshing-Success');\n  }).catch(function (e) {\n    win.webContents.send('tokenRefreshing-Failure');\n  });\n};\n//# sourceMappingURL=OnTokenRefereshRequired.js.map"]}