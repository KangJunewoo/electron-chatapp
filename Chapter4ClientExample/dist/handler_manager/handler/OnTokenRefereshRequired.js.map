{"version":3,"sources":["../../../handler_manager/handler/OnTokenRefereshRequired.js"],"names":["module","exports","socket","win","TokenManager","axios","require","httpInstance","create","baseURL","tokenRequest","token","getToken","id","getId","get","headers","webContents","send","then","response","setToken","data","io","opts","query","catch","e"],"mappings":"AAAA;;;;;AAKA;;AAEAA,OAAOC,OAAP,GAAiB,UAACC,MAAD,EAAQC,GAAR,EAAYC,YAAZ,EAA2B;AACxC,MAAMC,QAAQC,QAAQ,OAAR,CAAd;AACA,MAAMC,eAAeF,MAAMG,MAAN,CAAa,EAACC,SAAQ,4CAAT,EAAb,CAArB;AACA,MAAMC,eAAe,SAAfA,YAAe,GAAI;AACvB,QAAMC,QAAQP,aAAaQ,QAAb,EAAd;AACA,QAAMC,KAAKT,aAAaU,KAAb,EAAX;AACA,WAAOP,aAAaQ,GAAb,CAAiB,qBAAmBF,EAApC,EAAuC,EAACG,SAAQ,EAAC,kBAAiBL,KAAlB,EAAT,EAAvC,CAAP;AACD,GAJD;AAKAR,MAAIc,WAAJ,CAAgBC,IAAhB,CAAqB,iBAArB;AACAR,iBACGS,IADH,CACQ,UAACC,QAAD,EAAY;AAChBhB,iBAAaiB,QAAb,CAAsBD,SAASE,IAAT,CAAcX,KAApC;AACAT,WAAOqB,EAAP,CAAUC,IAAV,CAAeC,KAAf,GAAuB,EAACd,OAAMP,aAAaQ,QAAb,EAAP,EAAvB;AACAT,QAAIc,WAAJ,CAAgBC,IAAhB,CAAqB,yBAArB;AACD,GALH,EAMGQ,KANH,CAMS,UAACC,CAAD,EAAK;AACVxB,QAAIc,WAAJ,CAAgBC,IAAhB,CAAqB,yBAArB;AACD,GARH;AASH,CAlBD","file":"OnTokenRefereshRequired.js","sourcesContent":["/**\n * Created by kishe56@gmail.com on 2018. 9. 13.\n * Blog : https://kishe89.github.io\n * Github : https://github.com/kishe89\n */\n'use strict';\n\nmodule.exports = (socket,win,TokenManager)=>{\n    const axios = require('axios');\n    const httpInstance = axios.create({baseURL:'http://electronexampleserver.mybluemix.net'});\n    const tokenRequest = ()=>{\n      const token = TokenManager.getToken();\n      const id = TokenManager.getId();\n      return httpInstance.get('/users/token?id='+id,{headers:{'x-access-token':token}});\n    };\n    win.webContents.send('tokenRefreshing');\n    tokenRequest()\n      .then((response)=>{\n        TokenManager.setToken(response.data.token);\n        socket.io.opts.query = {token:TokenManager.getToken()};\n        win.webContents.send('tokenRefreshing-Success');\n      })\n      .catch((e)=>{\n        win.webContents.send('tokenRefreshing-Failure');\n      })\n};"]}